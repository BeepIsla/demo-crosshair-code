import{s as se,n as $,r as le,c as ae,o as oe,x as ee}from"../chunks/scheduler.D73blNo4.js";import{S as ie,i as ce,e as E,s as S,t as I,c as y,a as q,y as P,f as j,d as D,b as T,o as d,g as B,h as c,z as Z,j as Q,A as de}from"../chunks/index.CXbrRbae.js";import{w as ue,b as J}from"../chunks/entry.De7B81Hb.js";import{p as fe}from"../chunks/stores.Bl5zxVDJ.js";function te(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const U=ue({dragging:!1,file:void 0},()=>{function r(n){var s;n.preventDefault(),U.set({dragging:!0,file:(s=n.dataTransfer)==null?void 0:s.files[0]})}function t(n){n.preventDefault(),U.set({dragging:!1,file:void 0})}function e(n){var s;n.preventDefault(),U.set({dragging:!1,file:(s=n.dataTransfer)==null?void 0:s.files[0]})}return document.addEventListener("dragover",r),document.addEventListener("dragleave",t),document.addEventListener("drop",e),()=>{document.removeEventListener("dragover",r),document.removeEventListener("dragleave",t),document.removeEventListener("drop",e)}});function he(r){return new Promise((t,e)=>{const n=new FileReader;n.addEventListener("error",()=>{e(new Error("Failed to load file"))}),n.addEventListener("load",s=>{if(!s.target||!s.target.result||typeof s.target.result=="string"){e(new Error("Could not load file"));return}const a=new Uint8Array(s.target.result);try{const w=window.wasm_bindgen.parseEvent(a,"round_freeze_end").map(u=>u.get("tick")),f=window.wasm_bindgen.parseTicks(a,["crosshair_code"],w),_=[];for(const u of f)_.findIndex(m=>m.steamID===u.get("steamid"))>=0||_.push({steamID:u.get("steamid")??"",name:u.get("name")??"",code:u.get("crosshair_code")??""});t(_)}catch(o){e(o)}}),n.readAsArrayBuffer(r)})}function pe(r){return!(!r||!r.name.endsWith(".dem"))}async function me(r){try{return await navigator.clipboard.writeText(r),!0}catch{return!1}}function ge(){return new Promise((r,t)=>{const e=document.createElement("input");e.type="file",e.accept=".dem",e.addEventListener("cancel",()=>{e.remove(),r(!1)}),e.addEventListener("change",()=>{e.remove(),!e.files||e.files.length<=0?r(!1):(U.set({dragging:!1,file:e.files[0]}),r(!0))}),e.addEventListener("error",()=>{e.remove(),t(new Error("Failed to select file"))}),e.click()})}function re(r,t,e){const n=r.slice();return n[9]=t[e],n}function ve(r){let t,e='<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" class="text-white group-hover:text-black"><path fill="currentColor" d="M11 20H6.5q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20H13v-7.15l1.6 1.55L16 13l-4-4l-4 4l1.4 1.4l1.6-1.55Z"></path></svg>',n,s,a='<h2 class="text-base text-white group-hover:text-black">Drag &amp; drop your .dem file here</h2> <h2 class="text-sm italic text-white group-hover:text-black">...or click on this box to select a file from your device</h2>';return{c(){t=E("div"),t.innerHTML=e,n=S(),s=E("div"),s.innerHTML=a,this.h()},l(o){t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-tjiwuw"&&(t.innerHTML=e),n=j(o),s=y(o,"DIV",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1fljg82"&&(s.innerHTML=a),this.h()},h(){d(t,"class",""),d(s,"class","")},m(o,w){B(o,t,w),B(o,n,w),B(o,s,w)},d(o){o&&(D(t),D(n),D(s))}}}function we(r){let t,e="Loading...";return{c(){t=E("h1"),t.textContent=e,this.h()},l(n){t=y(n,"H1",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-1lzmij5"&&(t.textContent=e),this.h()},h(){d(t,"class","animate-pulse text-5xl font-bold uppercase text-zinc-400")},m(n,s){B(n,t,s)},d(n){n&&D(t)}}}function ne(r){let t,e,n=r[9].steamID+"",s,a,o=r[9].name+"",w,f,_,u,m,l=r[9].code+"",h,k,F,M;function z(){return r[6](r[9])}return{c(){t=E("li"),e=E("a"),s=I(n),a=I(": "),w=I(o),_=I(`
				           
				`),u=E("div"),m=E("code"),h=I(l),k=S(),this.h()},l(L){t=y(L,"LI",{class:!0});var b=q(t);e=y(b,"A",{href:!0,target:!0,rel:!0,class:!0});var x=q(e);s=T(x,n),a=T(x,": "),w=T(x,o),x.forEach(D),_=T(b,`
				           
				`),u=y(b,"DIV",{class:!0,role:!0,tabindex:!0});var C=q(u);m=y(C,"CODE",{});var O=q(m);h=T(O,l),O.forEach(D),C.forEach(D),k=j(b),b.forEach(D),this.h()},h(){d(e,"href",f="https://steamcommunity.com/profiles/"+r[9].steamID),d(e,"target","_blank"),d(e,"rel","noreferrer noreopener"),d(e,"class","transition hover:text-pink-400 active:scale-90"),d(u,"class","cursor-pointer transition hover:text-pink-400 active:scale-90"),d(u,"role","button"),d(u,"tabindex","0"),d(t,"class","flex justify-between text-white")},m(L,b){B(L,t,b),c(t,e),c(e,s),c(e,a),c(e,w),c(t,_),c(t,u),c(u,m),c(m,h),c(t,k),F||(M=[Z(u,"click",z),Z(u,"keydown",r[4])],F=!0)},p(L,b){r=L,b&1&&n!==(n=r[9].steamID+"")&&Q(s,n),b&1&&o!==(o=r[9].name+"")&&Q(w,o),b&1&&f!==(f="https://steamcommunity.com/profiles/"+r[9].steamID)&&d(e,"href",f),b&1&&l!==(l=r[9].code+"")&&Q(h,l)},d(L){L&&D(t),F=!1,le(M)}}}function be(r){let t,e,n="CS2 Demo Crosshair Code Extractor",s,a,o=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"></path></svg>
		GitHub`,w,f,_,u,m,l,h=r[0].length+"",k,F,M=r[0].length===1?"":"s",z,L,b,x,C,O=`<em class="text-left font-semibold not-italic">SteamID
				<p class="text-sm font-normal italic">Click to open profile</p></em>
			 
			<em class="text-right font-semibold not-italic">Code
				<p class="text-sm font-normal italic">Click to copy</p></em>`,G,N,K;function X(i,g){return i[1]?we:ve}let W=X(r),H=W(r),V=te(r[0]),v=[];for(let i=0;i<V.length;i+=1)v[i]=ne(re(r,V,i));return{c(){t=E("div"),e=E("h1"),e.textContent=n,s=S(),a=E("a"),a.innerHTML=o,w=S(),f=E("div"),H.c(),u=S(),m=E("h1"),l=I("Found "),k=I(h),F=I(" crosshair code"),z=I(M),L=I("."),b=S(),x=E("ul"),C=E("li"),C.innerHTML=O,G=S();for(let i=0;i<v.length;i+=1)v[i].c();this.h()},l(i){t=y(i,"DIV",{class:!0});var g=q(t);e=y(g,"H1",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-326fts"&&(e.textContent=n),s=j(g),a=y(g,"A",{href:!0,target:!0,class:!0,"data-svelte-h":!0}),P(a)!=="svelte-1itvnlq"&&(a.innerHTML=o),w=j(g),f=y(g,"DIV",{class:!0,role:!0,tabindex:!0});var p=q(f);H.l(p),p.forEach(D),u=j(g),m=y(g,"H1",{class:!0});var A=q(m);l=T(A,"Found "),k=T(A,h),F=T(A," crosshair code"),z=T(A,M),L=T(A,"."),A.forEach(D),b=j(g),x=y(g,"UL",{class:!0});var R=q(x);C=y(R,"LI",{class:!0,"data-svelte-h":!0}),P(C)!=="svelte-5p3vfg"&&(C.innerHTML=O),G=j(R);for(let Y=0;Y<v.length;Y+=1)v[Y].l(R);R.forEach(D),g.forEach(D),this.h()},h(){d(e,"class","mb-4 text-2xl text-white"),d(a,"href","https://github.com/BeepIsla/demo-crosshair-code"),d(a,"target","_blank"),d(a,"class","mb-4 flex items-center gap-1 text-white hover:underline"),d(f,"class",_="group flex h-[300px] w-full cursor-pointer place-content-center place-items-center justify-center gap-6 rounded-xl border-2 border-dashed border-zinc-400 p-8 transition "+(r[1]?"cursor-wait":"hover:border-transparent hover:bg-[#EDEDED]")),d(f,"role","button"),d(f,"tabindex","0"),d(m,"class","mb-4 mt-4 text-lg text-white"),d(C,"class","flex justify-between text-white"),d(x,"class","w-full"),d(t,"class","mx-auto flex h-screen w-full max-w-[1024px] flex-col items-center justify-center")},m(i,g){B(i,t,g),c(t,e),c(t,s),c(t,a),c(t,w),c(t,f),H.m(f,null),c(t,u),c(t,m),c(m,l),c(m,k),c(m,F),c(m,z),c(m,L),c(t,b),c(t,x),c(x,C),c(x,G);for(let p=0;p<v.length;p+=1)v[p]&&v[p].m(x,null);N||(K=[Z(f,"click",r[2]),Z(f,"keypress",r[5])],N=!0)},p(i,[g]){if(W!==(W=X(i))&&(H.d(1),H=W(i),H&&(H.c(),H.m(f,null))),g&2&&_!==(_="group flex h-[300px] w-full cursor-pointer place-content-center place-items-center justify-center gap-6 rounded-xl border-2 border-dashed border-zinc-400 p-8 transition "+(i[1]?"cursor-wait":"hover:border-transparent hover:bg-[#EDEDED]"))&&d(f,"class",_),g&1&&h!==(h=i[0].length+"")&&Q(k,h),g&1&&M!==(M=i[0].length===1?"":"s")&&Q(z,M),g&9){V=te(i[0]);let p;for(p=0;p<V.length;p+=1){const A=re(i,V,p);v[p]?v[p].p(A,g):(v[p]=ne(A),v[p].c(),v[p].m(x,null))}for(;p<v.length;p+=1)v[p].d(1);v.length=V.length}},i:$,o:$,d(i){i&&D(t),H.d(),de(v,i),N=!1,le(K)}}}function _e(r,t,e){let n;ae(r,fe,l=>e(7,n=l));let s=[],a=!0;oe(()=>{e(1,a=!0);let l=J.startsWith("/")?J:`/${J}`;l.endsWith("/")||(l+="/");const h=new URL(`${l}_app/immutable/assets/demoparser2/demoparser2.js`,n.url).href;import(h).then(async()=>{await window.wasm_bindgen(h.replace(".js","_bg.wasm"))}).catch(k=>{o(k,!0)}).finally(()=>{e(1,a=!1)})});function o(l,h){console.error(l),alert(h?`An error occurred: ${String(l)}

This will prevent the website from working.
Please reload the page.`:`An error occurred: ${String(l)}

Please select another file or report this issue.`)}function w(){a||(e(1,a=!0),ge().then(l=>{l||e(1,a=!1)}).catch(l=>{o(l),e(1,a=!1)}))}function f(l){me(l).then(()=>{alert(`Copied "${l}" to clipboard`)}).catch(h=>{alert(`Failed to copy to clipboard: ${h}`)})}U.subscribe(l=>{if(!l.dragging&&l.file){if(!pe(l.file)){alert(`Invalid file. Only .dem files are supported!

You may have to extract the file using 7zip.`);return}e(1,a=!0),he(l.file).then(h=>{e(0,s=h)}).catch(h=>{o(h)}).finally(()=>{e(1,a=!1)})}});function _(l){ee.call(this,r,l)}function u(l){ee.call(this,r,l)}return[s,a,w,f,_,u,l=>f(l.code)]}class Le extends ie{constructor(t){super(),ce(this,t,_e,be,se,{})}}export{Le as component};
